!function(o,_){"use strict";var s;function n(_,o,s){console.log("call servlet"),common.facebook.utils.getLatestData(document.URL,o,function(o){var t=o.data;if(void 0!==t){var e=r(_,t);d(_,e)}else a(_);s.resolve()})}function a(o){o.find(".g-FacebookPost__error").show()}function r(o,t){for(var e=[],_=o.data("number"),s=o.data("date-format"),a=o.data("link-label"),l=0;l<t.length&&l<_;l++){var c={};c.id=t[l].id.split("_")[1],c.date=moment(t[l].created_time,"YYYY-MM-DD hh:mm:ss").format(s),void 0!==t[l].message&&(c.text=$.fn.replaceLink(t[l].message,"_blank"),c.text=c.text.replace(/(?:^|[^ーー゛゜々ヾヽぁ-ヶ一-龠ａ-ｚＡ-Ｚ０-９a-zA-Z0-9À-ɏ&_/>]+)[#＃]([ー゛゜々ヾヽぁ-ヶ一-龠ａ-ｚＡ-Ｚ０-９a-zA-Z0-9À-ɏ_]*[ー゛゜々ヾヽぁ-ヶ一-龠ａ-ｚＡ-Ｚ０-９a-zA-ZÀ-ɏ]+[ー゛゜々ヾヽぁ-ヶ一-龠ａ-ｚＡ-Ｚ０-９a-zA-Z0-9À-ɏ_]*)/gi,' <a href="https://www.facebook.com/hashtag/$1?source=feed_text&story_id="'+c.id+'" target="_blank">#$1</a>')),c.commentCount=void 0!==t[l].comments?t[l].comments.data.length:0,c.likeCount=void 0!==t[l].reactions.summary.total_count?t[l].reactions.summary.total_count:-1,c.permalink=t[l].permalink_url,c.hasMedia=!1,void 0!==t[l].full_picture&&(c.imageSrc=t[l].full_picture,c.mediaType="image",c.hasMedia=!0),void 0!==t[l].source&&(c.movieSrc=t[l].source,c.mediaType="movie",c.hasMedia=!0),c.smallViewTop=o.hasClass("is-smallViewTop"),c.status_type=t[l].status_type,c.status_story=t[l].story,c.sharedURL=t[l].link,c.sharedTitle=t[l].name,c.sharedDescription=t[l].description,c.sharedCaption=t[l].caption,c.linkLabel=a,e.push(c)}return e}function d(o,t){$.templates("sharedBlockTmpl",c),$.templates("mediaTmpl",l),$.templates("postsTmpl",i);var e=$.render.postsTmpl(t);o.find(".g-FacebookPost__inner").html(e),s&&a(o),_.initAddedVideo()}$(document).ready(function(){s=$.fn.isAuthorring(),function(){var o=$(".js-FacebookPost");if(!o[0])return;o.each(function(){var c=$(this),i=c.data("path"),k=new $.Deferred;_.onloadAsyncDOM(k.promise()),$.ajax({url:i,cache:!1,type:"GET",dataType:"json"}).done(function(o,t,e){console.log("success");var _=moment(new Date(e.getResponseHeader("Last-Modified"))),s=moment(new Date(e.getResponseHeader("Date")));if(s.diff(_)<3e5){var a=o.data,l=r(c,a);return d(c,l),void k.resolve()}n(c,i,k)}).fail(function(o,t){console.log("error:"+t),n(c,i,k)})})}()});var l='{{if hasMedia}}<div class="g-FacebookPost__imageBlock l-FacebookPost__imageBlock"><div class="g-FacebookPost__imageBlock__inner l-FacebookPost__imageBlock__inner">{{if mediaType === "image"}}<img src="{{:imageSrc}}" width="100%" alt="">{{else}}<video width="100%" poster="{{:imageSrc}}" controls><source src="{{:movieSrc}}"></video>{{/if}}</div></div>{{/if}}',c='<div class="g-FacebookPost__sharedBlock l-FacebookPost__sharedBlock"><div class="g-FacebookPost__sharedBlock__inner l-FacebookPost__sharedBlock__inner"><div class="g-FacebookPost__sharedBlock__image l-FacebookPost__sharedBlock__image"><div class="g-FacebookPost__sharedBlock__image__inner l-FacebookPost__sharedBlock__image__inner">{{if mediaType === "image"}}<img src="{{:imageSrc}}" width="100%">{{else}}<video width="100%" poster="{{:imageSrc}}" controls><source src="{{:movieSrc}}"></video>{{/if}}</div></div><div class="g-FacebookPost__sharedBlock__desc l-FacebookPost__sharedBlock__desc"><h3 class="g-FacebookPost__sharedBlock__titleWrapper l-FacebookPost__sharedBlock__titleWrapper" ><a href="{{:sharedURL}}" class="g-FacebookPost__sharedBlock__title l-FacebookPost__sharedBlock__title" target="_blank">{{:sharedTitle}}</a></h3><p class="g-FacebookPost__sharedBlock__text l-FacebookPost__sharedBlock__text">{{:sharedDescription}}</p>{{if status_type === "shared_story"}}<small class="g-FacebookPost__sharedBlock__caption l-FacebookPost__sharedBlock__caption">{{:sharedCaption}}</small>{{/if}}</div></div></div>',i='<div class="g-FacebookPostUnit l-FacebookPostUnit {{if !hasMedia}}is-none-media{{/if}} {{if status_type === "shared_story" || status_type === "created_event"}}is-sharepost{{/if}}"><div class="g-FacebookPost__contentsBlock l-FacebookPost__contentsBlock">{{if !(status_type === "shared_story" || status_type === "created_event")}}{{if smallViewTop}}{{include tmpl="mediaTmpl"/}}{{/if}}{{/if}}<div class="g-FacebookPost__textBlock l-FacebookPost__textBlock"><div class="g-FacebookPost__textBlock__date l-FacebookPost__textBlock__date">{{:date}}</div><div class="g-FacebookPost__textBlock__message l-FacebookPost__textBlock__message">{{if status_type === "shared_story" || text === undefined}}<p class="g-FacebookPost__textBlock__message__info l-FacebookPost__textBlock__message__info">{{:status_story}}</p>{{/if}}<p class="g-FacebookPost__textBlock__message__text l-FacebookPost__textBlock__message__text">{{:text}}</p></div>{{if hasMedia}}{{if status_type === "shared_story" || status_type === "created_event"}}{{include tmpl="sharedBlockTmpl"/}}{{/if}}{{/if}}<div class="g-FacebookPost__textBlock__list__wrapper l-FacebookPost__textBlock__list__wrapper"><ul class="g-FacebookPost__textBlock__list l-FacebookPost__textBlock__list"><li class="g-FacebookPost__textBlock__listItem l-FacebookPost__textBlock__listItem g-FacebookPost__textBlock__listItem--comment l-FacebookPost__textBlock__listItem--comment"><span class="cmn-icon cmn-icon--comment g-FacebookPost__textBlock__listItem__icon l-FacebookPost__textBlock__listItem__icon"></span><span class="g-FacebookPost__textBlock__listItem__label l-FacebookPost__textBlock__listItem__label">{{:commentCount}}</span></li>{{if likeCount >= 0}}<li class="g-FacebookPost__textBlock__listItem l-FacebookPost__textBlock__listItem g-FacebookPost__textBlock__listItem--like l-FacebookPost__textBlock__listItem--like"><span class="cmn-icon cmn-icon--thumbs_up g-FacebookPost__textBlock__listItem__icon l-FacebookPost__textBlock__listItem__icon"></span><span class="g-FacebookPost__textBlock__listItem__label l-FacebookPost__textBlock__listItem__label">{{:likeCount}}</span></li>{{/if}}<li class="g-FacebookPost__textBlock__listItem l-FacebookPost__textBlock__listItem g-FacebookPost__textBlock__listItem--share l-FacebookPost__textBlock__listItem--share"><a href="http://www.facebook.com/share.php?u={{:permalink}}" class="g-FacebookPost__textBlock__listItem__link l-FacebookPost__textBlock__listItem__link" onclick="window.open(this.href, \'FBwindow\', \'width=650, height=450, menubar=no, toolbar=no, scrollbars=yes\'); return false;"><span class="cmn-icon cmn-icon--share g-FacebookPost__textBlock__listItem__icon l-FacebookPost__textBlock__listItem__icon"></span><span class="g-FacebookPost__textBlock__listItem__label l-FacebookPost__textBlock__listItem__label">Share</span></a></li></ul></div><div class="g-FacebookPost__textBlock__visit l-FacebookPost__textBlock__visit opt-hide-sm"><a href="{{:permalink}}" target="_blank" class="g-FacebookPost__textBlock__visit__link l-FacebookPost__textBlock__visit__link"><span class="cmn-icon cmn-icon--window g-FacebookPost__textBlock__visit__icon l-FacebookPost__textBlock__visit__icon"></span><span class="g-FacebookPost__textBlock__visit__label l-FacebookPost__textBlock__visit__label">{{:linkLabel}}</span></a></div></div>{{if !(status_type === "shared_story" || status_type === "created_event")}}{{if !smallViewTop}}{{include tmpl="mediaTmpl"/}}{{/if}}{{/if}}<div class="g-FacebookPost__textBlock__visit l-FacebookPost__textBlock__visit opt-hide-lg opt-hide-md"><a href="{{:permalink}}" target="_blank" class="g-FacebookPost__textBlock__visit__link l-FacebookPost__textBlock__visit__link"><span class="cmn-icon cmn-icon--window g-FacebookPost__textBlock__visit__icon l-FacebookPost__textBlock__visit__icon"></span><span class="g-FacebookPost__textBlock__visit__label l-FacebookPost__textBlock__visit__label">{{:linkLabel}}</span></a></div></div></div>'}(window,window.kaoAPI||(window.kaoAPI={}));